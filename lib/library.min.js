!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("library",[],t):"object"==typeof exports?exports.library=t():e.library=t()}(window,function(){return a={},e.m=t=[function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.onload=function(){!function(){var e={list:{raw:"data-awe-list",refined:"aweList"},player:{raw:"data-awe-player",refined:"awePlayer"},searchBtn:{raw:"data-awe-search-btn",refined:"aweSearchBtn"},searchInp:{raw:"data-awe-search",refined:"aweSearch"},connection:{raw:"data-awe-connection",refined:"aweConnection"},loader:{raw:"data-awe-loader",refined:"aweLoader"},tags:{raw:"data-awe-tags",refined:"aweTags"},pagination:{raw:"data-awe-paginate",refined:"awePaginate"},pageNumbers:{raw:"data-pager-numbers",refined:"pagerNumbers"},pagePrevious:{raw:"data-pager-previous",refined:"pagerPrevious"},pageNext:{raw:"data-pager-next",refined:"pagerNext"}},t=document.querySelectorAll("["+e.connection.raw+"]");if(t.length){var a=t[0].dataset,r={psid:a.awePsid,accessKey:a.aweAccesskey,clientIp:a.aweClientip},o={style:{hideElement:function(e){e.style.display="none"},showElement:function(e){e.style.display=""}}};o.actions={showOrHideComponent:function(e,t,a,n){document.querySelectorAll("["+e+"="+n+"]").forEach(function(e){"hide"==t?o.style.hideElement(e):o.style.showElement(e)})},removeLoader:function(t){o.actions.showOrHideComponent(e.loader.raw,"hide",{tag:"aweLoader"},t)},showLoader:function(t){o.actions.showOrHideComponent(e.loader.raw,"show",{tag:"aweLoader"},t)},hidePaginator:function(t){o.actions.showOrHideComponent(e.pagination.raw,"hide",{tag:"awePaginate"},t)},showPaginator:function(t){o.actions.showOrHideComponent(e.pagination.raw,"show",{tag:"awePaginate"},t)},getLabel:function(t,a){var n=e[a].refined;return t.dataset[n]},getElement:function(t,a){return document.querySelector("["+e[a].raw+"="+t+"]")},savePaginatorTemplate:function(t){var a=document.querySelector("["+e.pagination.raw+"="+t+"]");if(!a)return!1;d.paginators[t]={},d.paginators[t].element=a,d.paginators[t].template=a.cloneNode(!0)},generatePager:function(e,t){var a=t/2,n=Math.floor(a),r=n<e?e-n:e,o=e+Math.round(a)-1;return{startFrom:r,endAt:o=o-r!=t?parseInt(r)+parseInt(t)-1:o}},getUrlParam:function(e){var t=window.location.href;return new URL(t).searchParams.get(e)},getRandomArr:function(e,t){var a=new Array(t),n=e.length,r=new Array(n);if(n<t)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var o=Math.floor(Math.random()*n);a[t]=e[o in r?r[o]:o],r[o]=--n in r?r[n]:n}return a}};var i=document.querySelectorAll("["+e.list.raw+"]"),l=document.querySelectorAll("["+e.player.raw+"]"),s=document.querySelectorAll("["+e.searchBtn.raw+"]"),c=document.querySelectorAll("["+e.tags.raw+"]"),d={list:{},paginators:{}};(i.length||l.length)&&(i.forEach(function(e){m({element:e},"list");var t=o.actions.getLabel(e,"list");o.actions.savePaginatorTemplate(t),g(t)}),c.forEach(function(e){m({element:e},"tags"),function(e,t,a){t=t||{};var n=d.list[e].element;if(!n)throw"Sorry but no element was found with for the label "+e;var r=t.filterList?t.filterList:n.dataset;function i(e,t,a){e=function(e,t){return o.actions.getRandomArr(e,t)}(e,t.limit?t.limit:e.length),h(n,e,a),w({element:n,loaderLabel:t.aweTags})}if(m({element:n},"tags"),t.tagList)return i(t.tagList,r,a);u("tags",r,function(e){i(e.data.tags,r,a)})}(o.actions.getLabel(e,"tags"))}),l.forEach(function(e){!function(e){var t=Math.random(),a=e.dataset,n=new URLSearchParams(location.search),o=n.get("videoId")?n.get("videoId"):a.videoid;o&&(e.dataset.aweContainerId=t,e.classList.add("awe-player"),m({element:e},"player"),u("details/"+o,a,function(n){n.data.playerEmbedUrl||console.error("contentHash could not be resolved"),h(e,[n.data]),w({element:e,loaderLabel:e.dataset.awePlayer});var o=new URL(n.data.playerEmbedUrl).searchParams.get("contentHash");try{!function(e,n){var i,l=((i=n.querySelector('div[data-awe-container-id="'+t+'"]'))?i.removeAttribute("data-awe-container-id"):console.warn("Promotool container not found"),i);if(l){var s=f(a),c=r.psid,d=r.accessKey,u=n.createElement("iframe");u.src="//pt.protoawe.com/tube-player/"+s+"&psid="+c+"&accessKey="+d+"&contentHash="+o+"&psprogram=REVS&c=p",u.style.width="100%",u.style.height="100%",u.frameBorder=0,u.setAttribute("allowfullscreen","true"),l.prepend(u)}}(window,document)}catch(n){console.warn("Promotool error: "+n.message)}}))}(e)}),s.forEach(function(e){!function(e){e.onclick=function(){var e=this.dataset.aweSearchBtn,t=d.list[e].template.innerHTML;d.list[e].element.dataset.pageIndex=1;var a=d.list[e].element.dataset,n=o.actions.getElement(e,"searchInp");if(!n)throw'Sorry but it looks like you don\'t have a search box in place for search ie: <input data-awe-search="popular" />';var r=n.value;a.tags=2==r.split(" ").length?r:r.replace(/ /g,","),g(e,{filterList:a},t)}}(e)}),String.prototype.replaceAll=function(e,t){return this.split(e).join(t)})}else console.error("Sorry but you need to set your connectiond details");function u(e,t,a){var n="https://pt.ptawe.com/api/video-promotion/v1/"+e+f(Object.assign(t,r));console.log(n),fetch(n,{method:"GET",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){return a(e)}).catch(function(e){return function(e){console.error(e)}})}function f(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return"?"+t.join("&")}function p(t,a,n){if(d.paginators[t]){var r=d.paginators[t].element,i=d.paginators[t].template,l=r.dataset.pagerLength||7,s=(l=a.totalPages<l?a.totalPages:l,i.querySelector("["+e.pageNumbers.raw+"]")),c=i.querySelector("["+e.pagePrevious.raw+"]"),u=i.querySelector("["+e.pageNext.raw+"]");r.innerHTML="";var f=function(e,t,a){return function(){t.pageIndex=a;var n=d.list[e].template.innerHTML;g(e,t,n)}},p=a.currentPage<l?{startFrom:1,endAt:l}:o.actions.generatePager(a.currentPage,l),m=parseInt(a.currentPage)-1;c&&0<m&&(r.appendChild(c.cloneNode(!0)).onclick=f(t,n,m));for(var w=p.startFrom;w<=parseInt(p.endAt)&&parseInt(a.totalPages)!=w;w++){var h=s.cloneNode(!0);h.innerHTML=w,a.currentPage==w?h.classList.add("active"):h.classList.remove("active"),h.onclick=f(t,n,w),r.appendChild(h)}var y=a.currentPage+1;u&&y<a.totalPages&&(r.appendChild(u.cloneNode(!0)).onclick=f(t,n,y))}}function g(e,t,a){var n=o.actions.getUrlParam("videoTags");t=t||{};var r=d.list[e].element;if(!r)throw"Sorry but no element was found with for the label "+e;t.pagination,delete t.pagination;var i=t.filterList?t.filterList:r.dataset;function l(e,t,a){h(r,e,a),w({element:r,loaderLabel:t.aweList})}if(n&&(i.tags=i.tags&&i.tags.length?i.tags+","+n:i.tags=n),m({element:r},"list"),t.videoList)return p(e,t.pagination,i),l(videoList,i,a);u("list",i,function(t){var n=t.data.videos;p(e,t.data.pagination,i),l(n,i,a)})}function m(t,a){var n=t.element.dataset[e[a].refined];if(!n)throw'Sorry but you need to label your list template eg: `data-awe-list="popular"`';n=n.toLowerCase(),d.list[n]||(d.list[n.toLowerCase()]={element:t.element,template:t.element.cloneNode(!0),data:t.data}),o.actions.showLoader(n),o.actions.hidePaginator(n),o.style.hideElement(t.element)}function w(e){o.actions.removeLoader(e.loaderLabel),o.actions.showPaginator(e.loaderLabel),o.style.showElement(e.element)}function h(e,t,a){var r=a||e.innerHTML;e.innerHTML="",t.forEach(function(t){var a=r;if("string"==typeof t)a=a.replaceAll("@tag",t);else for(var o in t)if("object"==n(t[o])){var i=0,l=t[o];for(var s in l)a=a.replaceAll("@"+o+"."+i,l[s]),i++;i=0}else{var c=t[o];c="duration"==o?Math.floor(parseFloat(c)/60).toFixed(2):c,a=a.replaceAll("@"+o,c)}e.innerHTML+=a})}}()}}],e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=0);function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t,a});